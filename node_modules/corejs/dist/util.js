/**
 * Модуль утилит
 * @module util
 */
;(function(factory) {
    var registeredInModuleLoader = false;
    if (typeof define === 'function' && define.amd) {
        define(factory);
        registeredInModuleLoader = true;
    }

    if (!registeredInModuleLoader) {
        window.core.util = factory();
    }
})(/** @lends module:util */function() {
    /**
     * Экранировать кавычки
     * @param str строка
     */
    var addSlashes = function(str) {
        return str.replace('/(["\'\])/g', "\\$1");
    };

    /**
     * Получить из числа строку фиксированной длины, в которой отсутствующие разряды заполняются нулями
     * @param value число
     * @param length
     */
    var toFixLengthString = function(value, length) {
        var str,
            diff,
            i,
            result = '';

        length = length || 2;

        value = parseInt(value, 10);

        if (value < 0) {
            return false;
        }

        str = value.toString();
        diff = length - str.length;

        if (diff <= 0) {
            return str;
        }

        for (i = 0; i < diff; i++) {
            result += '0';
        }

        result += str;
        return result;
    };

    /**
     * Отрисовать электронную почту
     * @param user пользователь (часть адреса до @)
     * @param domain домен (часть адреса после @)
     */
    var writeEmail = function(user, domain) {
        document.write('<a href="mailto:' + user + '@' + domain + '">' + user + '@' + domain + '</a>');
    };

    return {
        addSlashes: addSlashes,
        toFixLengthString: toFixLengthString,
        writeEmail: writeEmail
    }
});